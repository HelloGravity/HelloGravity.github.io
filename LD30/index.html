<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>hello phaser!</title>
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css">
		<script src="../phaser.min.js"></script>
		<script src="../lodash.min.js"></script>
		<script src="toMars/toMars.js"></script>
		<script src="launch/launch.js"></script>
	</head>
	<body>
	<a href="/">Click Here To go to the main menu</a>
	<script type="text/javascript">
	var game, screen;

	window.onload = function() {
		game = new Phaser.Game(800, 600, Phaser.AUTO, '', { update : update , preload : preload, create : create});
		
		function preload() {
			/*To Mars*/
			game.load.image('tomars-spaceship', 'toMars/spaceship.png');
			_(1).range(4+1).forEach(function(n){
				game.load.image('tomars-potato'+n, 'toMars/potato' + n+'.png');
			});
			game.load.image('tomars-background', 'toMars/spacefield.png');
			game.load.image('tomars-earth', 'toMars/earth.png');
			game.load.image('tomars-boom', 'toMars/boom.png');
			game.load.image('tomars-mars', 'toMars/mars.png');
			game.load.image('tomars-spacebar', 'toMars/spacebarpress.png');
			game.load.image('tomars-grandpotato', 'toMars/grandpotato.png');
			game.load.image('tomars-instructions', 'toMars/startInstructions.png');
			game.load.image('tomars-tocontinue', 'toMars/tocontinue.png');
			game.load.physics('tomars-physicsdata', 'toMars/sprites.json');

			/*Launch*/
			_(1).range(6+1).forEach(function(n){
				game.load.image('launch-launch'+n, 'launch/launch' + n+'.png');
			});
			_(1).range(5+1).forEach(function(n){
				game.load.image('launch-'+n, 'launch/' + n+'.png');
			});
			game.load.image('launch-space', 'launch/press_space.png');
			game.load.image('launch-spaceship', 'launch/spaceship.png');
			game.load.image('launch-potato', 'launch/potato.png');
			
			game.physics.startSystem(Phaser.Physics.P2JS);
		}
		function create() {
		//	screen = new toMars(game);
			screen = new launch(game);
			screen.init();	
		}
		function update() {
			if(screen) {
				screen.update();
				var nextScreen = screen.nextScreen();
				if(nextScreen) {
					screen.cleanup();
					screen = nextScreen;
					screen.init();
				}
			}		
		}
	};

	</script>
	</body>
</html>